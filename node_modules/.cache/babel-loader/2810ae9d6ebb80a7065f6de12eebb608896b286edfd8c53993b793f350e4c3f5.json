{"ast":null,"code":"var _s = $RefreshSig$();\n/** @format */\n\nimport { useContext } from \"react\";\nimport axios from \"axios\";\nimport { message } from \"antd\";\nimport { Data } from \"../../App\";\nimport { useNavigate } from \"react-router-dom\";\nconst endPoint = \"https://65eb419b43ce164189339311.mockapi.io/users\";\nexport const useUsers = () => {\n  _s();\n  const {\n    setUser,\n    user\n  } = useContext(Data);\n  const navigate = useNavigate();\n  const lookUpUserByUserName = async username => {\n    let isExisted = false;\n    await axios.get(`${endPoint}?username=${username}`).then(res => {\n      const data = res.data;\n      if (data.length > 0) {\n        if (data[0].username === username) {\n          isExisted = true;\n        }\n      }\n    }).catch(err => console.log(err));\n    return isExisted;\n  };\n  const onSignup = async (username, email, password) => {\n    const defaultRole = 1; // user\n    const user = {\n      username: username,\n      email: email,\n      password: password,\n      role: defaultRole\n    };\n    const isExisted = await lookUpUserByUserName(username);\n    if (isExisted) {\n      message.error(\"Username này đã tồn tại\");\n    } else {\n      await axios.post(endPoint, user).then(res => {\n        setUser(user);\n        message.success(\"Tạo tài khoản thành công\");\n        navigate(\"/\");\n      });\n    }\n  };\n  const onLogOut = () => {\n    setUser(null);\n  };\n  const getCurrUser = () => {\n    return user;\n  };\n  return {\n    onSignup,\n    getCurrUser,\n    onLogOut\n  };\n};\n_s(useUsers, \"oDhbRZJIMWkEluDN3+Md/aMoh/E=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["useContext","axios","message","Data","useNavigate","endPoint","useUsers","_s","setUser","user","navigate","lookUpUserByUserName","username","isExisted","get","then","res","data","length","catch","err","console","log","onSignup","email","password","defaultRole","role","error","post","success","onLogOut","getCurrUser"],"sources":["/Users/giakhang/Desktop/STUDY/Kì5/Support HP/Civil-housing-construction-quotation-system/src/Services/Hooks/useUsers.js"],"sourcesContent":["/** @format */\n\nimport { useContext } from \"react\";\nimport axios from \"axios\";\nimport { message } from \"antd\";\nimport { Data } from \"../../App\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst endPoint = \"https://65eb419b43ce164189339311.mockapi.io/users\";\n\nexport const useUsers = () => {\n  const { setUser, user } = useContext(Data);\n  const navigate = useNavigate()\n\n  const lookUpUserByUserName = async (username) => {\n    let isExisted = false;\n    await axios\n      .get(`${endPoint}?username=${username}`)\n      .then((res) => {\n        const data = res.data;\n        if (data.length > 0) {\n          if (data[0].username === username) {\n            isExisted = true;\n          }\n        }\n      })\n      .catch((err) => console.log(err));\n\n    return isExisted;\n  };\n\n  const onSignup = async (username, email, password) => {\n    const defaultRole = 1; // user\n    const user = {\n      username: username,\n      email: email,\n      password: password,\n      role: defaultRole,\n    };\n\n    const isExisted = await lookUpUserByUserName(username);\n\n    if (isExisted) {\n      message.error(\"Username này đã tồn tại\");\n    } else {\n      await axios.post(endPoint, user).then((res) => {\n        setUser(user);\n        message.success(\"Tạo tài khoản thành công\");\n        navigate(\"/\");\n      });\n    }\n  };\n\n  const onLogOut = () => {\n    setUser(null)\n  }\n\n  const getCurrUser = () => {\n    return user;\n  };\n\n  return { onSignup, getCurrUser, onLogOut };\n};\n"],"mappings":";AAAA;;AAEA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,IAAI,QAAQ,WAAW;AAChC,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,QAAQ,GAAG,mDAAmD;AAEpE,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGT,UAAU,CAACG,IAAI,CAAC;EAC1C,MAAMO,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAMO,oBAAoB,GAAG,MAAOC,QAAQ,IAAK;IAC/C,IAAIC,SAAS,GAAG,KAAK;IACrB,MAAMZ,KAAK,CACRa,GAAG,CAAE,GAAET,QAAS,aAAYO,QAAS,EAAC,CAAC,CACvCG,IAAI,CAAEC,GAAG,IAAK;MACb,MAAMC,IAAI,GAAGD,GAAG,CAACC,IAAI;MACrB,IAAIA,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QACnB,IAAID,IAAI,CAAC,CAAC,CAAC,CAACL,QAAQ,KAAKA,QAAQ,EAAE;UACjCC,SAAS,GAAG,IAAI;QAClB;MACF;IACF,CAAC,CAAC,CACDM,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;IAEnC,OAAOP,SAAS;EAClB,CAAC;EAED,MAAMU,QAAQ,GAAG,MAAAA,CAAOX,QAAQ,EAAEY,KAAK,EAAEC,QAAQ,KAAK;IACpD,MAAMC,WAAW,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMjB,IAAI,GAAG;MACXG,QAAQ,EAAEA,QAAQ;MAClBY,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA,QAAQ;MAClBE,IAAI,EAAED;IACR,CAAC;IAED,MAAMb,SAAS,GAAG,MAAMF,oBAAoB,CAACC,QAAQ,CAAC;IAEtD,IAAIC,SAAS,EAAE;MACbX,OAAO,CAAC0B,KAAK,CAAC,yBAAyB,CAAC;IAC1C,CAAC,MAAM;MACL,MAAM3B,KAAK,CAAC4B,IAAI,CAACxB,QAAQ,EAAEI,IAAI,CAAC,CAACM,IAAI,CAAEC,GAAG,IAAK;QAC7CR,OAAO,CAACC,IAAI,CAAC;QACbP,OAAO,CAAC4B,OAAO,CAAC,0BAA0B,CAAC;QAC3CpB,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMqB,QAAQ,GAAGA,CAAA,KAAM;IACrBvB,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAED,MAAMwB,WAAW,GAAGA,CAAA,KAAM;IACxB,OAAOvB,IAAI;EACb,CAAC;EAED,OAAO;IAAEc,QAAQ;IAAES,WAAW;IAAED;EAAS,CAAC;AAC5C,CAAC;AAACxB,EAAA,CApDWD,QAAQ;EAAA,QAEFF,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}