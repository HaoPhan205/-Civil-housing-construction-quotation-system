{"ast":null,"code":"var _s = $RefreshSig$();\n/** @format */\n\nimport { useContext } from \"react\";\nimport axios from \"axios\";\nimport { message } from \"antd\";\nimport { Data } from \"../../App\";\nconst endPoint = \"https://65eb419b43ce164189339311.mockapi.io/users\";\nexport const useUsers = () => {\n  _s();\n  const {\n    setUser,\n    user\n  } = useContext(Data);\n  const lookUpUserByUserName = async username => {\n    let isExisted = false;\n    await axios.get(`${endPoint}?username=${username}`).then(res => {\n      const data = res.data;\n      if (data.length > 0) {\n        if (data[0].username === username) {\n          isExisted = true;\n        }\n      }\n    }).catch(err => console.log(err));\n    return isExisted;\n  };\n  const onSignup = async (username, email, password) => {\n    const defaultRole = 1; // user\n    const user = {\n      username: username,\n      email: email,\n      password: password,\n      role: defaultRole\n    };\n    const isExisted = await lookUpUserByUserName(username);\n    if (isExisted) {\n      message.error(\"Username này đã tồn tại\");\n    } else {\n      await axios.post(endPoint, user).then(res => {\n        setUser(user);\n        message.success(\"Tạo tài khoản thành công\");\n      });\n    }\n  };\n  const getCurrUser = () => {\n    return user;\n  };\n  return {\n    onSignup\n  };\n};\n_s(useUsers, \"mMCFN/vfWABbeiO05Nbos24yYsg=\");","map":{"version":3,"names":["useContext","axios","message","Data","endPoint","useUsers","_s","setUser","user","lookUpUserByUserName","username","isExisted","get","then","res","data","length","catch","err","console","log","onSignup","email","password","defaultRole","role","error","post","success","getCurrUser"],"sources":["/Users/giakhang/Desktop/STUDY/Kì5/Support HP/Civil-housing-construction-quotation-system/src/Services/Hooks/useUsers.js"],"sourcesContent":["/** @format */\n\nimport { useContext } from \"react\";\nimport axios from \"axios\";\nimport { message } from \"antd\";\nimport { Data } from \"../../App\";\n\nconst endPoint = \"https://65eb419b43ce164189339311.mockapi.io/users\";\n\nexport const useUsers = () => {\n  const { setUser, user } = useContext(Data);\n\n  const lookUpUserByUserName = async (username) => {\n    let isExisted = false;\n    await axios\n      .get(`${endPoint}?username=${username}`)\n      .then((res) => {\n        const data = res.data;\n        if (data.length > 0) {\n          if (data[0].username === username) {\n            isExisted = true;\n          }\n        }\n      })\n      .catch((err) => console.log(err));\n\n    return isExisted;\n  };\n\n  const onSignup = async (username, email, password) => {\n    const defaultRole = 1; // user\n    const user = {\n      username: username,\n      email: email,\n      password: password,\n      role: defaultRole,\n    };\n\n    const isExisted = await lookUpUserByUserName(username);\n\n    if (isExisted) {\n      message.error(\"Username này đã tồn tại\");\n    } else {\n      await axios.post(endPoint, user).then((res) => {\n        setUser(user);\n        message.success(\"Tạo tài khoản thành công\");\n      });\n    }\n  };\n\n  const getCurrUser = () => {\n    return user;\n  };\n\n  return { onSignup };\n};\n"],"mappings":";AAAA;;AAEA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,IAAI,QAAQ,WAAW;AAEhC,MAAMC,QAAQ,GAAG,mDAAmD;AAEpE,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGR,UAAU,CAACG,IAAI,CAAC;EAE1C,MAAMM,oBAAoB,GAAG,MAAOC,QAAQ,IAAK;IAC/C,IAAIC,SAAS,GAAG,KAAK;IACrB,MAAMV,KAAK,CACRW,GAAG,CAAE,GAAER,QAAS,aAAYM,QAAS,EAAC,CAAC,CACvCG,IAAI,CAAEC,GAAG,IAAK;MACb,MAAMC,IAAI,GAAGD,GAAG,CAACC,IAAI;MACrB,IAAIA,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QACnB,IAAID,IAAI,CAAC,CAAC,CAAC,CAACL,QAAQ,KAAKA,QAAQ,EAAE;UACjCC,SAAS,GAAG,IAAI;QAClB;MACF;IACF,CAAC,CAAC,CACDM,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;IAEnC,OAAOP,SAAS;EAClB,CAAC;EAED,MAAMU,QAAQ,GAAG,MAAAA,CAAOX,QAAQ,EAAEY,KAAK,EAAEC,QAAQ,KAAK;IACpD,MAAMC,WAAW,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMhB,IAAI,GAAG;MACXE,QAAQ,EAAEA,QAAQ;MAClBY,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA,QAAQ;MAClBE,IAAI,EAAED;IACR,CAAC;IAED,MAAMb,SAAS,GAAG,MAAMF,oBAAoB,CAACC,QAAQ,CAAC;IAEtD,IAAIC,SAAS,EAAE;MACbT,OAAO,CAACwB,KAAK,CAAC,yBAAyB,CAAC;IAC1C,CAAC,MAAM;MACL,MAAMzB,KAAK,CAAC0B,IAAI,CAACvB,QAAQ,EAAEI,IAAI,CAAC,CAACK,IAAI,CAAEC,GAAG,IAAK;QAC7CP,OAAO,CAACC,IAAI,CAAC;QACbN,OAAO,CAAC0B,OAAO,CAAC,0BAA0B,CAAC;MAC7C,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB,OAAOrB,IAAI;EACb,CAAC;EAED,OAAO;IAAEa;EAAS,CAAC;AACrB,CAAC;AAACf,EAAA,CA9CWD,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}